Synology 923+ 의 Container Manager 를 통해서 돌아가는 주식매매하는 프로그램을 만들겁니다.
로그인 화면을 통해 접속하고, 메인화면에서 자동매매 카드와 수동매매를 위한 터미날 창을 띄웁니다.
mcmugane terminal 이라 이름을 붙였습니다. /volume1/docker/mcmugane 폴더에 넣어서 사용하겠습니다.
자동매매 카드는 매수/매도 전략을 JSON으로 설정한 전략방식을 선택할 수 있고, 금액과, 종목등을 설정할 수 있습니다.
매수/매도 명령은 alpaca API 를 통해서 실행됩니다.
자동매매와 수동매매는 동시에 실행될 수 있습니다.
자동매매는 백그라운드에서 주기적으로 실행되고, 수동매매는 사용자가 명령을 입력할 때마다 실행됩니다.
자동매매와 수동매매의 결과는 logs 에 기록되고, 터미날 결과창에도 표시됩니다.
logs 는 날짜별로 구분되어 저장됩니다.
uder-defined.json 에는 사용자 설정이 저장됩니다. 언어설정으로 등락색상 날짜표시등이 결정되고, API 키등이 저장됩니다.
{전략이름}.json 에는 각 전략별 설정이 저장됩니다. 예제로 3개정도 만들어주세요. 가장 유명하고 간단한 전략으로.
myETFs.json 에는 사용자가 관심있는 목록과 비율이 저장됩니다. 
예:
myETF1, {"AAPL":30,"MSFT":20,"GOOGL":10,"AMZN":10,"TSLA":10,"NVDA":10,"META":10},
myETF2, {"VOO":50,"VTI":30,"QQQ":20},
myETF3, {"SPY":50,"DIA":30,"IWM":20}
나중에 리밸런싱이 필요할 때, 이 정의를 읽어서 나중에 계산하기 용이 할수도 있겠습니다.

터미날 명령형식은 다음과 같습니다.
HELP 입력시 명령어 도움말을 표시합니다.
MODE {PAPER|LIVE} 입력시 모드를 전환합니다.
AUTO {ON|OFF} 입력시 자동매매를 켜거나 끕니다.
STATUS 입력시 현재 모드와 자동매매 상태를 표시합니다.
PORTFOLIO 입력시 현재 보유중인 종목과 수량, 평균매입가를 표시합니다. 

.{TICKER} 입력시 해당 종목의 정보를 표시합니다. 보유여부와 보유했다면 얼마를 보유했는지 표시합니다.
BUY .{TICKER} {수량} {가격}
SELL .{TICKER} {수량} {가격}
CANCEL  {ORDER_ID} 입력시 해당 주문을 취소합니다.
위 3개의 명령은 대화형으로도 가능합니다.
예를 들어, buy 만 입력했을땐, 티커를 물어보고, 몇주를 살지 물어보고, 가격을 입력하면 확인후 실행합니다.
또한 buy .TTWO 만 입력했을땐, 몇주를 살지 물어보고, 가격을 입력하면 확인후 실행합니다.
또한 buy .TTWO 10 만 입력했을땐, market은 엔터 수동입력시, 원하는 가격을 물어보고 확인후 실행합니다.
또한 buy .TTWO 10 150 만 입력했을땐, 확인후 실행합니다.
myETF 도 대화형으로 가능합니다.
예를 들어, buy myETF1 50000|20% 을 입력하면 myETF.json 에서 종목과 비율을 읽어와서, 매수할 종목과 수량을 금액에 맞춰 계산하고, 확인후 실행합니다. %의  경우는  Buying Power
또한 buy .TTWO 20% 입력시, 현재 Buying Power 의 20%를 추가 매수합니다. 이 경우에도 수량이 자동계산되기 때문에 그 부분을 자동으로 처리합니다.
또한 buy .TTWO $20 입력시, $20 어치 매수합니다. 이 경우에도 수량이 자동계산되기 때문에 그 부분을 자동으로 처리합니다.

SELL 도 동일하게 동작합니다.
sell 만 입력했을땐, 보유종목을 물어보고, 몇주를 팔지 물어보고, 가격을 입력하면 확인후 실행합니다.
또한 sell .TTWO 만 입력했을땐, 몇주를 팔지 물어보고, 가격을 입력하면 확인후 실행합니다.
또한 sell .TTWO 10 만 입력했을땐, market은 엔터 수동입력시, 원하는 가격을 물어보고 확인후 실행합니다.
또한 sell .TTWO 10 150 만 입력했을땐, 확인후 실행합니다.
또한 sell myETF1 50%|$50000 입력시, myETF.json 에서 종목과 비율을 읽어와서, 매도할 종목과 수량을 보유수량에 맞춰 계산하고, 확인후 실행합니다.
sell .TTWO 20% 입력시, 현재 보유수량의 20%를 매도합니다. 이 경우에도 수량이 자동계산되기 때문에 그 부분을 자동으로 처리합니다.
sell .TTWO $20 입력시, 현재 보유수량중에서 $20 어치를 매도합니다. 이 경우에도 수량이 자동계산되기 때문에 그 부분을

ORDERS 입력시 현재 체결되지 않은 주문들을 표시합니다.
HISTORY 입력시 최근 거래내역을 표시합니다.
LOGS {DATE} 입력시 해당 날짜의 로그를 표시합니다. DATE 형식은 지정된 형식으로 보여줍니다. ko=한국, us=미국 입니다.

log 같은것들은 database로 관리하는게 좋을까요? 아니면 그냥 파일로 관리하는게 좋을까요? NAS 의 자체 데이타베이스를 이용할 수 있다면 방법을 알려주세요. mysqlite mariaDB 이런게 있는것 같습니다. 필수는 아니니 최적화에 방해 된다면 신경쓰지 마세요.
기타 개선사항이나 오류관련 아이디어가 있으면 추가 해주세요.